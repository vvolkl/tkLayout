@include SimParms

BeamPipe Pipe {

    radius         20.0   // mm
    thickness      0.8    // mm
    radLength      0.00227
    intLength      0.00190
}

Tracker Inner {

    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    zOverlap 0.0
    phiOverlap 0.0 
    rOverlap 0.0 
    barrelRotation 1.5707963268 // Starts building modules from X=0, Ymax
    smallParity -1
    bigParity 1
    innerRadiusFixed true 
    outerRadiusFixed true
    //useMinMaxRCorrect false

    // Detector constraints
    etaCut 6

    trackingTags inner,tracker
    
    Barrel BRL {
      
      numLayers 6
      innerRadius 23.5
      outerRadius 460.0
      // outerZ 820 // Use only if tilted not defined
      // phiSegments 2 // Use only if tilted not defined
      
      zOverlap 1.25
      phiOverlap 0.5
      rOverlap 0.5

      //sameRods true
      radiusMode fixed
      startZMode modulecenter

      // Tilted don't use automatic placement
      Layer 1 { radius  25.0 }
      Layer 2 { radius  60.0 } 
      Layer 3 { radius 100.0 } 
      Layer 4 { radius 150.0 }
      Layer 5 { radius 260.0 }
      Layer 6 { radius 380.0 }
      
      // General info 
      Layer 1 {
       
       isTilted true
       isTiltedAuto true


       bigDelta 1.0
       smallDelta 0.0
       width 12.8
       length 25.6
       physicalLength 25.6       
       moduleType pixel
       plotColor 2
       @include Pixel_BRL_module0.cfg
       @include Pixel_material_innermost.cfg
       resolutionLocalX 0.0075 // Pitch ~25um
       resolutionLocalY 0.015  // Pitch ~50um
      }
      Layer 2-4 {

       isTilted true
       isTiltedAuto true

       bigDelta 1.0
       smallDelta 0.0
       width 25.6
       length 25.6
       physicalLength 25.6
       moduleType pixel
       plotColor 2
       @include Pixel_BRL_module1.cfg
       @include Pixel_material_innermost.cfg
       resolutionLocalX 0.0075 // Pitch ~25um
       resolutionLocalY 0.015  // Pitch ~50um
      }
      Layer 5-6 {

       isTilted true
       isTiltedAuto true

       width 51.2
       length 102.4         // 51.2 + 51.2 together  
       physicalLength 102.4
       moduleType macroPixel
       plotColor 7
       @include MacroPixel_module0.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um 
      }

      // Detailed description
      Layer 1 {
       
       numModulesFlat 5
       numModulesTilted 10

       numberRods 14  // 14 originally in flat layout
       
       Ring 6-15 {
         ringInnerRadius 25.43
         ringOuterRadius 26.43
         tiltAngle 10.0
         theta_g 90.0
       }
       // Set Z overlap in a way to have +-75mm zError coverage
       Ring 6  { ringZOverlap 4.5 }
       Ring 7  { ringZOverlap 7.0 }
       Ring 8  { ringZOverlap 6.15 }
       Ring 9  { ringZOverlap 5.5 }
       Ring 10 { ringZOverlap 4.8 }
       Ring 11 { ringZOverlap 5.0 } // Shorten ring to finish @ 800mm
       Ring 12 { ringZOverlap 5.0 } // Shorten ring to finish @ 800mm
       Ring 13 { ringZOverlap 5.0 } // Shorten ring to finish @ 800mm
       Ring 14 { ringZOverlap 5.0 } // Shorten ring to finish @ 800mm
       Ring 15 { ringZOverlap 4.5 } // Shorten ring to finish @ 800mm
      }
      Layer 2 {
       
       numModulesFlat 6
       numModulesTilted 7

       numberRods 18  // 16 originally in flat layout
       
       Ring 7-8 {
         ringInnerRadius 59.50
         ringOuterRadius 60.50
         tiltAngle 70.5
         theta_g 29.5
       }
       Ring 9-10 {
         ringInnerRadius 59.50
         ringOuterRadius 60.50
         tiltAngle 79.2
         theta_g 20.8
       }
       Ring 11-13 {
         ringInnerRadius 59.50
         ringOuterRadius 60.50
         tiltAngle 83.9
         theta_g 16.1
       }
       // Set Z overlap in a way to have +-75mm zError coverage
       Ring 7  { ringZOverlap 5.95 }
       Ring 8  { ringZOverlap 11.2 }
       Ring 9  { ringZOverlap 9.00 }
       Ring 10 { ringZOverlap 6.90 }
       Ring 11 { ringZOverlap 12.1 } // Shorten ring to finish @ 800mm
       Ring 12 { ringZOverlap 12.1 } // Shorten ring to finish @ 800mm
       Ring 13 { ringZOverlap 12.065 } // Shorten ring to finish @ 800mm
      }
      Layer 3 {
       
       numModulesFlat 6
       numModulesTilted 9

       numberRods 28  // 26 originally in flat layout
       
       Ring 7-8 {
         ringInnerRadius 99.50
         ringOuterRadius 100.50
         tiltAngle 58.3
         theta_g 41.7
       }
       Ring 9-10 {
         ringInnerRadius 99.50
         ringOuterRadius 100.50
         tiltAngle 67.5
         theta_g 32.5
       }
       Ring 11-12 {
         ringInnerRadius 99.50
         ringOuterRadius 100.50
         tiltAngle 74.8
         theta_g 25.2
       }
       Ring 13-14 {
         ringInnerRadius 99.50
         ringOuterRadius 100.50
         tiltAngle 80.0
         theta_g 20.0
       }
       Ring 15 {
         ringInnerRadius 99.50
         ringOuterRadius 100.50
         tiltAngle 84.0
         theta_g 16.0
       }
       // Set Z overlap in a way to have +-75mm zError coverage
       Ring 7  { ringZOverlap 4.65 }
       Ring 8  { ringZOverlap 9.20 }
       Ring 9  { ringZOverlap 8.25 }
       Ring 10 { ringZOverlap 7.35 }
       Ring 11 { ringZOverlap 6.35 }
       Ring 12 { ringZOverlap 5.40 }
       Ring 13 { ringZOverlap 4.45 }
       Ring 14 { ringZOverlap 3.65 }
       Ring 15 { ringZOverlap 4.74 } // Shorten ring to finish @ 800mm
      }
      Layer 4 {
       
       numModulesFlat 6
       numModulesTilted 12

       numberRods 40  // 38 originally in flat layout
       
       Ring 7-8 {
         ringInnerRadius 149.50
         ringOuterRadius 150.50
         tiltAngle 46.8
         theta_g 53.2
       }
       Ring 9-10 {
         ringInnerRadius 149.50
         ringOuterRadius 150.50
         tiltAngle 56.0
         theta_g 44.0
       }
       Ring 11-12 {
         ringInnerRadius 149.50
         ringOuterRadius 150.50
         tiltAngle 63.6
         theta_g 36.4
       }
       Ring 13-14 {
         ringInnerRadius 149.50
         ringOuterRadius 150.50
         tiltAngle 69.9
         theta_g 30.1
       }
       Ring 15-16 {
         ringInnerRadius 149.50
         ringOuterRadius 150.50
         tiltAngle 74.9
         theta_g 25.1
       }
       Ring 17-18 {
         ringInnerRadius 149.50
         ringOuterRadius 150.50
         tiltAngle 78.6
         theta_g 21.4
       }
       // Set Z overlap in a way to have +-75mm zError coverage
       Ring 7  { ringZOverlap 3.3  }
       Ring 8  { ringZOverlap 6.7  }
       Ring 9  { ringZOverlap 6.5  }
       Ring 10 { ringZOverlap 6.3  }
       Ring 11 { ringZOverlap 5.75 }
       Ring 12 { ringZOverlap 5.4  }
       Ring 13 { ringZOverlap 4.9  }
       Ring 14 { ringZOverlap 4.4  }
       Ring 15 { ringZOverlap 3.9  }
       Ring 16 { ringZOverlap 3.45 }
       Ring 17 { ringZOverlap 5.64 } // Shorten ring to finish @ 800mm (originally 3.0)
       Ring 18 { ringZOverlap 5.65 } // Shorten ring to finish @ 800mm (originally 2.65)
      }
      Layer 5 {
        numModulesFlat 2
        numModulesTilted 4

        zOverlap 1.5
        numberRods 38  // 34 originally in flat layout
       
        Ring 3-4 {
          ringInnerRadius 255.00
          ringOuterRadius 265.00
          tiltAngle 43.9
          theta_g 56.1
        }
        Ring 5-6 {
          ringInnerRadius 255.00
          ringOuterRadius 265.00
          tiltAngle 65.5
          theta_g 34.5
        }

        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 3  { ringZOverlap 9.8  }
        Ring 4  { ringZOverlap 16.2 }
        Ring 5  { ringZOverlap 14.6 }
        Ring 6  { ringZOverlap 12.8 }
      }
      Layer 6 {
        numModulesFlat 2
        numModulesTilted 5

        zOverlap 1.0
        numberRods 54  // 50 originally in flat layout
       
        Ring 3-4 {
          ringInnerRadius 375.00
          ringOuterRadius 385.00
          tiltAngle 33.5
          theta_g 66.5
        }
        Ring 5-6 {
          ringInnerRadius 375.00
          ringOuterRadius 385.00
          tiltAngle 53.1
          theta_g 46.9
        }
        Ring 7 {
          ringInnerRadius 375.00
          ringOuterRadius 385.00
          tiltAngle 63.1
          theta_g 36.9
        }

        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 3  { ringZOverlap 5.75 }
        Ring 4  { ringZOverlap 9.80 }
        Ring 5  { ringZOverlap 10.4 }
        Ring 6  { ringZOverlap 10.6 }
        Ring 7  { ringZOverlap 15.15 } // Shorten ring to finish @ 800mm (originaly 9.1) 
      }
    }
    Endcap ECAP {
      //@includestd Conversions/flangeTEDD
          
      phiSegments 4
      numDisks 5
      innerRadius 25
      outerRadius 400
      barrelGap 150 // Service channel between BRL & ECAP
      outerZ 2250 
      alignEdges false
      moduleShape wedge
      moduleType pixel    
 
      Disk 1-5 {
        Ring 1 {
          waferDiameter 86.2
          additionalModules 0
          moduleType pixel
          @include Pixel_InnerFwd_module0.cfg
          @include Pixel_material.cfg
          resolutionLocalX 0.0075 // Pitch ~25um
          resolutionLocalY 0.015  // Pitch ~50um
          plotColor 11 
        }
        Ring 2 {
          waferDiameter 113.0
          additionalModules 2
          moduleType pixel
          @include Pixel_InnerFwd_module1.cfg
          @include Pixel_material.cfg
          resolutionLocalX 0.0095 // Pitch ~100/3um
          resolutionLocalY 0.030  // Pitch ~100um
          plotColor 5
        }
        Ring 3 {
          waferDiameter 114.8
          additionalModules 3
          moduleType macroPixel
          @include MacroPixel_InnerFwd_module0.cfg
          @include MacroPixel_material.cfg
          resolutionLocalX 0.0095 // Pitch ~100/3um
          resolutionLocalY 0.115  // Pitch ~400um
          plotColor 7
        }
        Ring 4 {
          waferDiameter 112.6
          additionalModules 4
          moduleType macroPixel
          @include MacroPixel_InnerFwd_module1.cfg
          @include MacroPixel_material.cfg
          resolutionLocalX 0.0095 // Pitch ~100/3um
          resolutionLocalY 0.115  // Pitch ~400um
          plotColor 7
        }
      }
    }
}
Tracker Outer {

    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    zOverlap 0.75
    phiOverlap 0.5
    rOverlap 0.5
    barrelRotation 0 //1.57079632679
    smallParity 1
    bigParity 1
    innerRadiusFixed true
    outerRadiusFixed true
    //useMinMaxRCorrect false
    plotColor 1
    
    // Detector constraints
    etaCut 6

    trackingTags outer,tracker
 
    Barrel BRL {
      numLayers 6
//      outerZ 2250 // Use only if tilted not defined
      startZMode modulecenter
      innerRadius 522.4
      outerRadius 1545
      sameRods true
      physicalLength 102.4
//      phiSegments 2 // Use only if tilted not defined
      plotColor 1

      // Tilted don't use automatic placement
      Layer 1 { radius 529.95  }
      Layer 2 { radius 742.40  }
      Layer 3 { radius 937.25  } 
      Layer 4 { radius 1132.00 }
      Layer 5 { radius 1326.75 }         
      Layer 6 { radius 1539.85 }

      // General info
      Layer 1-2 {

       isTilted true
       isTiltedAuto true

       plotColor 7
       width 102.4
       length 102.4            // 256pxls x 0.4mm 
       moduleType macroPixel
       @include MacroPixel_module1.cfg
       @include MacroPixel_material.cfg 
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Macro-pixels ~ 400um
      }
      Layer 3-5 {

       isTilted true
       isTiltedAuto true

       width 102.4
       length 102.4            // 2x50mm + 2x1mm +1x0.4mm
       moduleType strip
       @include Strip_Outer_module.cfg
       @include Strip_material_2.5.cfg 
       resolutionLocalX 0.0095
       resolutionLocalY 0.500 //0.962  // Strip = 10/3mm or r-phi pitch / rot. by angle 20mrad --> for tilted both X & Y contribute to R-Phi res., hence required finer pitch in Z
      }
      Layer 6 {

       isTilted true
       isTiltedAuto true

       width 102.4
       length 102.4            // 2x50mm + 2x1mm +1x0.4mm
       moduleType strip
       @include Strip_Outer_module.cfg
       @include Strip_material_2.5.cfg 
       resolutionLocalX 0.0095
       resolutionLocalY 14.434 // Strip = 50mm --> The only non-tilted layer, hence not affecting R-Phi res.
      }

      // Detailed description
      Layer 1 {
        numModulesFlat 3
        numModulesTilted 10

        numberRods 36  // 34 originally in flat layout
       
        Ring 4-5 {
          ringInnerRadius 524.95
          ringOuterRadius 534.95
          tiltAngle 34.1
          theta_g 65.9
        }
        Ring 6-7 {
          ringInnerRadius 524.95
          ringOuterRadius 534.95
          tiltAngle 49.2
          theta_g 50.8
        }
        Ring 8-9 {
          ringInnerRadius 524.95
          ringOuterRadius 534.95
          tiltAngle 60.8
          theta_g 39.2
        }
        Ring 10-11 {
          ringInnerRadius 524.95
          ringOuterRadius 534.95
          tiltAngle 69.5
          theta_g 30.5
        }
        Ring 12-13 {
          ringInnerRadius 524.95
          ringOuterRadius 534.95
          tiltAngle 75.6 // (75.4 changed to form sufficient service channel @2300mm)
          theta_g 24.4
        }
        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 4  { ringZOverlap 4.1 }
        Ring 5  { ringZOverlap 7.1 }
        Ring 6  { ringZOverlap 7.5 }
        Ring 7  { ringZOverlap 7.6 }
        Ring 8  { ringZOverlap 7.2 }
        Ring 9  { ringZOverlap 6.6 }
        Ring 10 { ringZOverlap 5.9 }
        Ring 11 { ringZOverlap 5.2 }
        Ring 12 { ringZOverlap 7.34 } // Rod shorten to form sufficient service channel @ 2300mm (4.4mm changed)
        Ring 13 { ringZOverlap 7.34 } // Rod shorten to form sufficient service channel @ 2300mm (3.8mm changed)
      }
      Layer 2 {
        numModulesFlat 4
        numModulesTilted 11

        numberRods 50  // 46 originally in flat layout

        Ring 5-6 {
          ringInnerRadius 737.40
          ringOuterRadius 747.40
          tiltAngle 31.9
          theta_g 68.1
        }
        Ring 7-8 {
          ringInnerRadius 737.40
          ringOuterRadius 747.40
          tiltAngle 43.6
          theta_g 56.4
        }
        Ring 9-10 {
          ringInnerRadius 737.40
          ringOuterRadius 747.40
          tiltAngle 53.4
          theta_g 46.6
        }
        Ring 11-12 {
          ringInnerRadius 737.40
          ringOuterRadius 747.40
          tiltAngle 61.4
          theta_g 38.6
        }
        Ring 13-14 {
          ringInnerRadius 737.40
          ringOuterRadius 747.40
          tiltAngle 67.9
          theta_g 32.1
        }
        Ring 15 {
          ringInnerRadius 737.40
          ringOuterRadius 747.40
          tiltAngle 71.3
          theta_g 28.7
        }
        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 5  { ringZOverlap 2.7 }
        Ring 6  { ringZOverlap 4.8 }
        Ring 7  { ringZOverlap 5.2 }
        Ring 8  { ringZOverlap 5.4 }
        Ring 9  { ringZOverlap 5.3 }
        Ring 10 { ringZOverlap 5.2 }
        Ring 11 { ringZOverlap 4.9 }
        Ring 12 { ringZOverlap 4.6 }
        Ring 13 { ringZOverlap 4.2 }
        Ring 14 { ringZOverlap 3.8 }
        Ring 15 { ringZOverlap 3.4 }
      }
      Layer 3 {
        numModulesFlat 5
        numModulesTilted 12

        numberRods 62  // 58 originally in flat layout

        Ring 6-7 {
          ringInnerRadius 932.25
          ringOuterRadius 942.25
          tiltAngle 31.0
          theta_g 69.0
        }
        Ring 8-9 {
          ringInnerRadius 932.25
          ringOuterRadius 942.25
          tiltAngle 40.7
          theta_g 59.3
        }
        Ring 10-11 {
          ringInnerRadius 932.25
          ringOuterRadius 942.25
          tiltAngle 49.1
          theta_g 50.9
        }
        Ring 12-13 {
          ringInnerRadius 932.25
          ringOuterRadius 942.25
          tiltAngle 56.4
          theta_g 43.6
        }
        Ring 14-15 {
          ringInnerRadius 932.25
          ringOuterRadius 942.25
          tiltAngle 62.4
          theta_g 37.6
        }
        Ring 16-17 {
          ringInnerRadius 932.25
          ringOuterRadius 942.25
          tiltAngle 66.7
          theta_g 33.3
        }
        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 6  { ringZOverlap 2.1 }
        Ring 7  { ringZOverlap 3.7 }
        Ring 8  { ringZOverlap 4.0 }
        Ring 9  { ringZOverlap 4.2 }
        Ring 10 { ringZOverlap 4.2 }
        Ring 11 { ringZOverlap 4.2 }
        Ring 12 { ringZOverlap 4.1 }
        Ring 13 { ringZOverlap 4.0 }
        Ring 14 { ringZOverlap 3.8 }
        Ring 15 { ringZOverlap 3.5 }
        Ring 16 { ringZOverlap 28.7 } // Rod shorten to form sufficient service channel @ 2300mm
        Ring 17 { ringZOverlap 28.7 } // Rod shorten to form sufficient service channel @ 2300mm
      }
      Layer 4 {
        numModulesFlat 6
        numModulesTilted 12

        numberRods 74  // 70 originally in flat layout

        Ring 7-8 {
          ringInnerRadius 1127.00
          ringOuterRadius 1137.00
          tiltAngle 30.4
          theta_g 69.6
        }
        Ring 9-10 {
          ringInnerRadius 1127.00
          ringOuterRadius 1137.00
          tiltAngle 38.6
          theta_g 61.4
        }
        Ring 11-12 {
          ringInnerRadius 1127.00
          ringOuterRadius 1137.00
          tiltAngle 46.0
          theta_g 54.0
        }
        Ring 13-14 {
          ringInnerRadius 1127.00
          ringOuterRadius 1137.00
          tiltAngle 52.5
          theta_g 47.5
        }
        Ring 15-16 {
          ringInnerRadius 1127.00
          ringOuterRadius 1137.00
          tiltAngle 58.2
          theta_g 41.8
        }
        Ring 17-18 {
          ringInnerRadius 1127.00
          ringOuterRadius 1137.00
          tiltAngle 62.5
          theta_g 37.5
        }
        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 7  { ringZOverlap 1.7 }
        Ring 8  { ringZOverlap 3.0 }
        Ring 9  { ringZOverlap 3.3 }
        Ring 10 { ringZOverlap 3.4 }
        Ring 11 { ringZOverlap 3.5 }
        Ring 12 { ringZOverlap 3.5 }
        Ring 13 { ringZOverlap 3.5 }
        Ring 14 { ringZOverlap 3.4 }
        Ring 15 { ringZOverlap 3.3 }
        Ring 16 { ringZOverlap 3.2 } 
        Ring 17 { ringZOverlap 19.72 } // Rod shorten to form sufficient service channel @ 2300mm
        Ring 18 { ringZOverlap 19.72 } // Rod shorten to form sufficient service channel @ 2300mm
      }
      Layer 5 {
        numModulesFlat 7
        numModulesTilted 12

        numberRods 86  // 82 originally in flat layout

        Ring 8-9 {
          ringInnerRadius 1321.75
          ringOuterRadius 1331.75
          tiltAngle 30.0
          theta_g 70.0
        }
        Ring 10-11 {
          ringInnerRadius 1321.75
          ringOuterRadius 1331.75
          tiltAngle 37.1
          theta_g 62.9
        }
        Ring 12-13 {
          ringInnerRadius 1321.75
          ringOuterRadius 1331.75
          tiltAngle 43.6
          theta_g 56.4
        }
        Ring 14-15 {
          ringInnerRadius 1321.75
          ringOuterRadius 1331.75
          tiltAngle 49.5
          theta_g 50.5
        }
        Ring 16-17 {
          ringInnerRadius 1321.75
          ringOuterRadius 1331.75
          tiltAngle 54.7
          theta_g 45.3
        }
        Ring 18-19 {
          ringInnerRadius 1321.75
          ringOuterRadius 1331.75
          tiltAngle 58.8
          theta_g 41.2
        }
        // Set Z overlap in a way to have +-75mm zError coverage
        Ring 8  { ringZOverlap 1.45 }
        Ring 9  { ringZOverlap 2.55 }
        Ring 10 { ringZOverlap 2.7  }
        Ring 11 { ringZOverlap 2.85 }
        Ring 12 { ringZOverlap 2.9  }
        Ring 13 { ringZOverlap 3.0  }
        Ring 14 { ringZOverlap 2.95 }
        Ring 15 { ringZOverlap 2.95 }
        Ring 16 { ringZOverlap 2.9  } 
        Ring 17 { ringZOverlap 2.8  }
        Ring 18 { ringZOverlap 22.5 } // Rod shorten to form sufficient service channel @ 2300mm
        Ring 19 { ringZOverlap 22.5 } // Rod shorten to form sufficient service channel @ 2300mm
      }
      Layer 6 {
        numModulesFlat 24
        numModulesTilted 0
        numberRods 96  // 94 originally in flat layout -> need phiOverlap
      }
    }
    Endcap ECAP {
      //@includestd Conversions/flangeTEDD

      phiSegments 4
      numDisks 6
      innerRadius 25
      outerRadius 1545
      //barrelGap 375 // Not reasonably defined if tilted barrel built
      innerZ 2625     // Used instead of barrelGap
      outerZ 5000
      alignEdges false

      Ring 1 {
       moduleShape wedge
       moduleType pixel 
       plotColor 11
       
       trackingTags inner,tracker       
       @include Pixel_OuterFwd_module0.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0075 // Pitch ~25um
       resolutionLocalY 0.015  // Pitch ~50um
      }
      Ring 2 {
       moduleShape wedge
       moduleType pixel 
       plotColor 5
       
       trackingTags inner,tracker       
       @include Pixel_OuterFwd_module1.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.030  // Pitch ~100um
      }
      Ring 3 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_OuterFwd_module0.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 4 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_OuterFwd_module1.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 5 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_OuterFwd_module2.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 6 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_OuterFwd_module3.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 7-9 {
       moduleShape rectangular
       moduleType macroPixel
       width 102.4
       length 102.4
       physicalLength 102.4
       plotColor 7

       trackingTags outer,tracker
       @include MacroPixel_module1.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      } 
      Ring 10-15 {
       moduleShape rectangular
       moduleType strip
       width 102.4
       length 102.4
       physicalLength 102.4
       moduleType strip
       plotColor 1

       trackingTags outer,tracker
       @include Strip_Fwd_module.cfg
       @include Strip_material_2.5.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.500 // 2.887  // Strip = 10mm or r-phi pitch / rot. by angle 20mrad
      } 
      Ring 16 {
       moduleShape rectangular
       width 102.4
       length 52.0
       physicalLength 52.0
       moduleType strip
       plotColor 1

       trackingTags outer,tracker
       @include Strip_Fwd_half_module.cfg
       @include Strip_material_2.5.cfg
       resolutionLocalX 0.0095
       resolutionLocalY 0.500 // 2.887 // Strip = 10mm or r-phi pitch / rot. by angle 20mrad
      }

      Ring 1 {
       waferDiameter 86.2
       additionalModules 0
      }
      Ring 2 {
       waferDiameter 113.0
       additionalModules 2
      }
      Ring 3 {
       waferDiameter 114.8
       additionalModules 3
      }
      Ring 4 {
       waferDiameter 112.6
       additionalModules 4
      }
      Ring 5 {
       waferDiameter 118.6
       additionalModules 5
      }
      Ring 6 {
       waferDiameter 113.7
       additionalModules 5
      }
    }
}

Tracker FwdI {

    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    zOverlap 0.5
    phiOverlap 0.5
    rOverlap 0.5
    barrelRotation 1.57079632679
    smallParity 1
    bigParity 1
    innerRadiusFixed true
    outerRadiusFixed true
    //useMinMaxRCorrect false
    plotColor 1

    // Detector constraints
    etaCut 6

    Endcap ECAP {
      //@includestd Conversions/flangeTEDD

      phiSegments 4
      numDisks 3
      innerRadius 25.0
      //outerRadius 1300
      barrelGap 6250
      outerZ 8750
      alignEdges false

      Disk 1 { 
       outerRadius 900 
      }
      Disk 2 { 
       outerRadius 1100 
      }
      Disk 3 { 
       outerRadius 1300 
      }

      Ring 1 {
       moduleShape wedge
       moduleType pixel 
       plotColor 8
       
       trackingTags inner,tracker       
       @include Pixel_iFwd_module0.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0075 // Pitch ~25um
       resolutionLocalY 0.015  // Pitch ~50um
      }
      Ring 2 {
       moduleShape wedge
       moduleType pixel 
       plotColor 4
       
       trackingTags inner,tracker       
       @include Pixel_iFwd_module1.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.030  // Pitch ~100um
      }
      Ring 3 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_iFwd_module0.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 4 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_iFwd_module1.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 5 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_iFwd_module2.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 6 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_iFwd_module3.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 7-9 {
       moduleShape rectangular
       moduleType macroPixel
       width 102.4
       length 102.4
       physicalLength 102.4
       plotColor 7

       trackingTags outer,tracker
       @include MacroPixel_module1.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      } 
      Ring 10-13 {
       moduleShape rectangular
       width 102.4
       length 102.4
       physicalLength 102.4
       moduleType strip
       plotColor 1

       trackingTags outer,tracker
       @include Strip_Fwd_module.cfg
       @include Strip_material_2.5.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.500 //2.887  // Strip = 10mm or r-phi pitch / rot. by angle 20mrad
      } 
      
      Ring 1 {
       waferDiameter 103.1
       additionalModules 0
      }
      Ring 2 {
       waferDiameter 115.5
       additionalModules 2
      }
      Ring 3 {
       waferDiameter 114.1
       additionalModules 3
      }
      Ring 4 {
       waferDiameter 113.7
       additionalModules 4
      }
      Ring 5 {
       waferDiameter 113.4
       additionalModules 5
      }
      Ring 6 {
       waferDiameter 114.8
       additionalModules 5
      }
    }
}

Tracker Fwd {

    // Layout construction parameters
    bigDelta 5
    smallDelta 2.5
    zOverlap 0.5
    phiOverlap 0.5
    rOverlap 0.5
    barrelRotation 1.57079632679
    smallParity 1
    bigParity 1
    innerRadiusFixed true
    outerRadiusFixed true
    //useMinMaxRCorrect false
    plotColor 1

    // Detector constraints
    etaCut 6

    Endcap ECAP {
      //@includestd Conversions/flangeTEDD

      phiSegments 4
      numDisks 6
      innerRadius 49.5 
      outerRadius 1545
      barrelGap 10000
      outerZ 16000
      alignEdges false

      Ring 1 {
       moduleShape wedge
       moduleType pixel 
       plotColor 8
       
       trackingTags inner,tracker       
       @include Pixel_Fwd_module0.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0075 // Pitch ~25um
       resolutionLocalY 0.015  // Pitch ~50um
      }
      Ring 2 {
       moduleShape wedge
       moduleType pixel 
       plotColor 4
       
       trackingTags inner,tracker       
       @include Pixel_Fwd_module1.cfg
       @include Pixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.030  // Pitch ~400um
      }
      Ring 3 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_Fwd_module0.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 4 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_Fwd_module1.cfg       
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 5 {
       moduleShape wedge
       moduleType macroPixel
       plotColor 7
       
       trackingTags inner,tracker       
       @include MacroPixel_Fwd_module2.cfg       
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      }
      Ring 6-9 {
       moduleShape rectangular
       moduleType macroPixel
       width 102.4
       length 102.4
       physicalLength 102.4
       plotColor 7

       trackingTags outer,tracker
       @include MacroPixel_module1.cfg
       @include MacroPixel_material.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.115  // Pitch ~400um
      } 
      Ring 10-16 {
       moduleShape rectangular
       width 102.4
       length 102.4
       physicalLength 102.4
       moduleType strip
       plotColor 1

       trackingTags outer,tracker
       @include Strip_Fwd_module.cfg
       @include Strip_material_2.5.cfg
       resolutionLocalX 0.0095 // Pitch ~100/3um
       resolutionLocalY 0.500 //2.887  // Strip = 10mm or r-phi pitch / rot. by angle 20mrad
      } 

      Ring 1 {
       waferDiameter 107.6
       additionalModules 0
      }
      Ring 2 {
       waferDiameter 113.05
       additionalModules 2
      }
      Ring 3 {
       waferDiameter 112.7
       additionalModules 3
      }
      Ring 4 {
       waferDiameter 112.7
       additionalModules 4
      }
      Ring 5 {
       waferDiameter 114.4
       additionalModules 5
      }
    }
}
